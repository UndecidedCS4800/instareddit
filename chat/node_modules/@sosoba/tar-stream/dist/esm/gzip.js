import { deepStrictEqual } from 'node:assert';
import { Transform } from 'node:stream';
const GZIP_OS_OFFSET = 9;
export const createGzipOSTransformer = (os = 255, opts) => {
    let count = 0;
    return new Transform({
        transform: (chunk, encoding, callback) => {
            deepStrictEqual(encoding, 'buffer');
            if (count < GZIP_OS_OFFSET) {
                if (count + chunk.length > GZIP_OS_OFFSET) {
                    chunk[GZIP_OS_OFFSET - count] = os;
                }
                count += chunk.length;
            }
            callback(undefined, chunk);
        }
    });
};
//# sourceMappingURL=gzip.js.map